<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Linguamis Planner</title>
    <link rel="stylesheet" href="scheduleplanner.css">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        gray: {
                            750: '#2d3748',
                            850: '#1a202c',
                            950: '#030712',
                        }
                    }
                }
            }
        }
    </script>
    
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/xlsx-js-style@1.2.0/dist/xlsx.bundle.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script><script src="https://unpkg.com/docx@7.1.0/build/index.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script> <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

</head>
<body class="bg-gray-50 dark:bg-gray-950 text-gray-800 dark:text-gray-100 h-screen flex flex-col overflow-hidden transition-colors duration-200">

    <header class="bg-white dark:bg-gray-900 shadow-sm border-b dark:border-gray-800 z-30 shrink-0 transition-colors duration-200">
        <div class="max-w-7xl mx-auto px-4 py-3 flex flex-col md:flex-row justify-between items-center gap-3">
            
            <div class="flex items-center justify-between w-full md:w-auto">
                <div class="flex items-center gap-4">
                    <h1 class="text-xl font-bold text-gray-900 dark:text-white">
                        <a href="/" class="flex items-center gap-3 hover:opacity-80 transition-opacity">
                            <img src="linguamis-logo.png" alt="Site Logosu" class="w-10 h-10 object-contain">
                            <span id="appTitle" class="md:inline hidden">Linguamis Planner</span>
                            <span class="md:hidden inline">Linguamis Planner</span>
                        </a>
                    </h1>
                </div>

                <div class="md:hidden flex gap-2">
                    <button onclick="app.toggleDarkMode()" class="p-2 text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors">
                        <i id="mobileThemeIcon" data-lucide="moon" class="w-5 h-5"></i>
                    </button>
                    <button onclick="app.openSettingsModal()" class="p-2 text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg">
                        <i data-lucide="settings" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>

            <div class="md:hidden flex items-center gap-4 bg-gray-100 dark:bg-gray-800 rounded-full px-1 py-1 w-full justify-between transition-colors duration-200">
                <button onclick="app.changeMobileDay(-1)" class="p-2 bg-white dark:bg-gray-700 rounded-full shadow-sm active:bg-gray-50 dark:active:bg-gray-600 text-gray-700 dark:text-gray-200">
                    <i data-lucide="chevron-left" class="w-5 h-5"></i>
                </button>
                <span id="mobileCurrentDayDisplay" class="font-bold text-gray-800 dark:text-gray-100 text-sm uppercase tracking-wide">Monday</span>
                <button onclick="app.changeMobileDay(1)" class="p-2 bg-white dark:bg-gray-700 rounded-full shadow-sm active:bg-gray-50 dark:active:bg-gray-600 text-gray-700 dark:text-gray-200">
                    <i data-lucide="chevron-right" class="w-5 h-5"></i>
                </button>
            </div>
            
            <div class="hidden md:flex gap-2">
                <button onclick="app.toggleDarkMode()" class="p-2 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors mr-2">
                    <i id="desktopThemeIcon" data-lucide="moon" class="w-5 h-5"></i>
                </button>
                <button onclick="app.toggleLanguage()" id="langBtn" class="px-3 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-bold border border-gray-200 dark:border-gray-700 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                    TR
                </button>
                <button onclick="app.openSettingsModal()" class="p-2 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors">
                    <i data-lucide="settings" class="w-5 h-5"></i>
                </button>
                <div class="w-px h-8 bg-gray-300 dark:bg-gray-700 mx-2"></div>
                <button onclick="app.openNewEventModal()" id="btnAddDesktop" class="flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium shadow-sm">
                    <i data-lucide="plus" class="w-4 h-4"></i> Add
                </button>
            </div>
        </div>
    </header>

    <main class="flex-1 overflow-auto relative bg-white dark:bg-gray-950 md:p-4 transition-colors duration-200">
        <div class="md:max-w-[1600px] md:mx-auto md:bg-white md:dark:bg-gray-900 md:rounded-xl md:shadow-lg md:border md:border-gray-200 md:dark:border-gray-800 min-h-full transition-colors duration-200">
            <div id="scheduleGrid" class="schedule-grid bg-white dark:bg-gray-900 relative pb-20 md:pb-0 transition-colors duration-200">
            </div>
        </div>
    </main>

    <button id="mobileEditToggle" onclick="app.toggleMobileEditMode()" class="md:hidden fixed bottom-6 left-6 w-14 h-14 bg-gray-800 text-white rounded-full shadow-xl flex items-center justify-center z-40 active:scale-90 transition-transform border border-gray-600">
        <i id="mobileEditIcon" data-lucide="lock" class="w-6 h-6"></i>
    </button>

    <button onclick="app.openNewEventModal()" class="md:hidden fixed bottom-6 right-6 w-14 h-14 bg-blue-600 text-white rounded-full shadow-xl flex items-center justify-center z-40 active:scale-90 transition-transform hover:bg-blue-700">
        <i data-lucide="plus" class="w-8 h-8"></i>
    </button>

    <div id="eventModal" class="modal-overlay fixed inset-0 bg-gray-900/60 backdrop-blur-sm flex items-end md:items-center justify-center md:p-4 z-[60]">
        <div class="modal-content bg-white dark:bg-gray-900 w-full md:w-[480px] md:rounded-xl rounded-t-2xl shadow-2xl overflow-hidden flex flex-col transition-colors duration-200">
            
            <div class="md:hidden w-full flex justify-center pt-3 pb-1">
                <div class="w-12 h-1.5 bg-gray-300 dark:bg-gray-700 rounded-full"></div>
            </div>

            <div class="px-6 py-4 border-b dark:border-gray-800 flex justify-between items-center">
                <h3 id="modalTitle" class="font-bold text-lg text-gray-800 dark:text-white">Edit Activity</h3>
                <button onclick="app.closeModal()" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 bg-gray-100 dark:bg-gray-800 p-1.5 rounded-full transition-colors">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>
            
            <form id="eventForm" class="p-6 space-y-5 overflow-y-auto max-h-[70vh]">
                <input type="hidden" id="eventId">

                <div>
                    <label id="lblTitle" class="block text-xs uppercase tracking-wider font-semibold text-gray-500 dark:text-gray-400 mb-1">Title</label>
                    <input type="text" id="inputTitle" required class="w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl focus:bg-white dark:focus:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-all font-medium text-lg placeholder-gray-400">
                </div>

                <div>
                    <label id="lblCategory" class="block text-xs uppercase tracking-wider font-semibold text-gray-500 dark:text-gray-400 mb-2">Category</label>
                    <div id="colorPicker" class="grid grid-cols-4 gap-2">
                    </div>
                    <input type="hidden" id="inputType">
                </div>

                <div>
                    <label id="lblDay" class="block text-xs uppercase tracking-wider font-semibold text-gray-500 dark:text-gray-400 mb-2">Days</label>
                    <div class="flex flex-wrap gap-2" id="daySelectionContainer">
                        </div>
                </div>

                <div class="grid grid-cols-2 gap-4 bg-gray-50 dark:bg-gray-800 p-3 rounded-xl border border-gray-200 dark:border-gray-700">
                    <div class="col-span-2 text-[10px] font-bold text-gray-400 uppercase tracking-widest text-center">Time Settings</div>
                    
                    <div>
                        <label id="lblStart" class="block text-xs uppercase tracking-wider font-semibold text-gray-500 dark:text-gray-400 mb-1">Start</label>
                        <input type="time" id="inputStart" step="60" required class="w-full px-3 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none font-medium text-gray-900 dark:text-white transition-colors">
                    </div>
                    
                    <div>
                        <label id="lblEnd" class="block text-xs uppercase tracking-wider font-semibold text-blue-600 dark:text-blue-400 mb-1">End Time</label>
                        <input type="time" id="inputEnd" class="w-full px-3 py-3 bg-white dark:bg-gray-900 border border-blue-200 dark:border-blue-900/50 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none font-medium text-gray-900 dark:text-white transition-colors">
                    </div>

                    <div class="col-span-2 flex items-center gap-3 pt-1 border-t border-gray-200 dark:border-gray-700 mt-1">
                         <label id="lblDuration" class="text-xs uppercase tracking-wider font-semibold text-gray-500 dark:text-gray-400 whitespace-nowrap">Duration (Min):</label>
                         <input type="number" id="inputDuration" step="1" min="1" required class="w-full bg-transparent border-none outline-none font-bold text-gray-900 dark:text-white text-right focus:ring-0 p-0" placeholder="60">
                    </div>
                </div>

                <div class="flex items-center justify-between bg-gray-50 dark:bg-gray-800 p-3 rounded-xl border border-gray-200 dark:border-gray-700">
                    <div class="flex items-center gap-3">
                        <div class="p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-full text-yellow-600 dark:text-yellow-400">
                            <i data-lucide="bell" class="w-5 h-5"></i>
                        </div>
                        <div>
                            <div id="lblAlarm" class="font-semibold text-sm text-gray-900 dark:text-white">Enable Alarm</div>
                            <div id="lblAlarmDesc" class="text-xs text-gray-500 dark:text-gray-400">Notify me when starts</div>
                        </div>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="inputAlarm" class="sr-only peer">
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-yellow-500"></div>
                    </label>
                </div>

                <div class="pt-2 flex gap-3 pb-safe">
                    <button type="button" id="btnDelete" class="hidden flex-1 py-3 px-4 border border-red-200 dark:border-red-900/50 text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-xl hover:bg-red-100 dark:hover:bg-red-900/30 font-semibold flex justify-center items-center gap-2 transition-colors">
                        <i data-lucide="trash-2" class="w-5 h-5"></i>
                    </button>
                    <button type="submit" id="btnSave" class="flex-[3] py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold flex justify-center items-center gap-2 shadow-lg shadow-blue-200 dark:shadow-none transition-colors">
                        <i data-lucide="check" class="w-5 h-5"></i> Save
                    </button>
                </div>
            </form>
        </div>
    </div>

<div id="settingsModal" class="modal-overlay fixed inset-0 bg-gray-900/60 backdrop-blur-sm flex items-end md:items-center justify-center md:p-4 z-[70]">
        <div class="modal-content bg-white dark:bg-gray-900 w-full md:w-[450px] md:rounded-xl rounded-t-2xl shadow-2xl overflow-hidden flex flex-col h-[85vh] md:h-auto md:max-h-[600px]">
             
            <div class="px-6 py-4 border-b dark:border-gray-800 flex justify-between items-center shrink-0">
                <h3 id="settingsTitle" class="font-bold text-lg text-gray-800 dark:text-white">Settings</h3>
                <button onclick="app.closeSettingsModal()" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 bg-gray-100 dark:bg-gray-800 p-1.5 rounded-full transition-colors">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>

            <div class="flex border-b border-gray-100 dark:border-gray-800 shrink-0">
                <button onclick="app.switchTab('general')" id="tabBtn-general" class="flex-1 py-3 text-sm font-semibold border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 dark:border-blue-400 transition-colors">
                    General
                </button>
                <button onclick="app.switchTab('categories')" id="tabBtn-categories" class="flex-1 py-3 text-sm font-medium text-gray-500 border-b-2 border-transparent hover:text-gray-700 dark:hover:text-gray-300 transition-colors">
                    Categories
                </button>
                <button onclick="app.switchTab('data')" id="tabBtn-data" class="flex-1 py-3 text-sm font-medium text-gray-500 border-b-2 border-transparent hover:text-gray-700 dark:hover:text-gray-300 transition-colors">
                    Data & Export
                </button>
            </div>

            <div class="p-6 overflow-y-auto flex-1 custom-scrollbar">
                
                <div id="tabContent-general" class="space-y-6">
                    <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700">
                        <span class="font-medium text-gray-700 dark:text-gray-200 text-sm">Language / Dil</span>
                        <button onclick="app.toggleLanguage()" class="px-3 py-1.5 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded border border-gray-200 dark:border-gray-600 font-bold text-xs shadow-sm">
                            <span id="currentLangDisplay">EN</span>
                        </button>
                    </div>

                    <div class="space-y-3">
                        <p id="lblViewSettings" class="text-xs font-bold text-gray-400 uppercase tracking-wider">View Settings</p>
                        
                        <div class="grid grid-cols-2 gap-3">
                            <div>
                                <label id="lblGridStart" class="block text-[10px] uppercase text-gray-500 font-bold mb-1">Start Hour</label>
                                <select id="gridStartSelect" onchange="app.updateViewSettings()" class="w-full p-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-blue-500"></select>
                            </div>
                            <div>
                                <label id="lblGridEnd" class="block text-[10px] uppercase text-gray-500 font-bold mb-1">End Hour</label>
                                <select id="gridEndSelect" onchange="app.updateViewSettings()" class="w-full p-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-blue-500"></select>
                            </div>
                        </div>

                        <div>
                            <label id="lblVisibleDays" class="block text-[10px] uppercase text-gray-500 font-bold mb-2">Visible Days</label>
                            <div id="dayToggles" class="grid grid-cols-3 gap-2"></div>
                        </div>
                    </div>
                </div>

                <div id="tabContent-categories" class="hidden space-y-4">
                    <div class="flex items-center justify-between">
                        <p class="text-xs font-bold text-gray-400 uppercase tracking-wider">Active Categories</p>
                        <button onclick="app.addNewCategory()" class="text-xs bg-blue-100 text-blue-700 px-3 py-1.5 rounded-lg hover:bg-blue-200 dark:bg-blue-900/30 dark:text-blue-400 font-bold transition-colors">
                            + Add New
                        </button>
                    </div>
                    <div id="categoryListContainer" class="space-y-2">
                        </div>
                </div>

                <div id="tabContent-data" class="hidden space-y-6">
                    
                    <div class="space-y-2">
                        <p id="lblExport" class="text-xs font-bold text-gray-400 uppercase tracking-wider">Export Schedule</p>
                        <div class="grid grid-cols-4 gap-2">
                            <button onclick="app.exportExcel()" class="flex flex-col items-center justify-center p-3 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-xl hover:bg-green-100 dark:hover:bg-green-900/40 border border-green-200 dark:border-green-800 transition-colors">
                                <i data-lucide="sheet" class="w-5 h-5 mb-1"></i>
                                <span class="text-[10px] font-bold">Excel</span>
                            </button>
                            <button onclick="app.exportPDF()" class="flex flex-col items-center justify-center p-3 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded-xl hover:bg-red-100 dark:hover:bg-red-900/40 border border-red-200 dark:border-red-800 transition-colors">
                                <i data-lucide="file-text" class="w-5 h-5 mb-1"></i>
                                <span class="text-[10px] font-bold">PDF</span>
                            </button>
                            <button onclick="app.exportWord()" class="flex flex-col items-center justify-center p-3 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 rounded-xl hover:bg-blue-100 dark:hover:bg-blue-900/40 border border-blue-200 dark:border-blue-800 transition-colors">
                                <i data-lucide="file-type-2" class="w-5 h-5 mb-1"></i>
                                <span class="text-[10px] font-bold">Word</span>
                            </button>
                            <button onclick="app.exportImage()" class="flex flex-col items-center justify-center p-3 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-400 rounded-xl hover:bg-purple-100 dark:hover:bg-purple-900/40 border border-purple-200 dark:border-purple-800 transition-colors">
                                <i data-lucide="image" class="w-5 h-5 mb-1"></i>
                                <span class="text-[10px] font-bold">JPEG</span>
                            </button>
                        </div>
                    </div>

                    <div class="space-y-2">
                        <p id="lblData" class="text-xs font-bold text-gray-400 uppercase tracking-wider">Data Actions</p>
                        
                        <button onclick="app.openAIPromptModal()" class="w-full flex items-center gap-3 px-4 py-3 bg-purple-50 dark:bg-purple-900/10 border border-purple-100 dark:border-purple-900/30 rounded-xl hover:bg-purple-100 dark:hover:bg-purple-900/20 transition-colors text-left group">
                            <div class="p-2 bg-white dark:bg-gray-800 rounded-full shadow-sm group-hover:scale-110 transition-transform">
                                <i data-lucide="bot" class="w-4 h-4 text-purple-600 dark:text-purple-400"></i>
                            </div>
                            <div>
                                <div class="font-bold text-sm text-gray-800 dark:text-white">AI Assistant Prompt</div>
                                <div class="text-[10px] text-gray-500">Get JSON prompt for ChatGPT</div>
                            </div>
                        </button>

                        <div class="grid grid-cols-2 gap-2">
                            <button onclick="app.shareOrCopy()" class="flex items-center gap-2 px-3 py-3 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                                <i data-lucide="share-2" class="w-4 h-4 text-gray-500"></i>
                                <div class="text-left">
                                    <div id="btnShare" class="font-bold text-xs text-gray-700 dark:text-gray-200">Share / Copy</div>
                                </div>
                            </button>
                            <button onclick="app.importData()" class="flex items-center gap-2 px-3 py-3 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                                <i data-lucide="download" class="w-4 h-4 text-gray-500"></i>
                                <div class="text-left">
                                    <div id="btnImport" class="font-bold text-xs text-gray-700 dark:text-gray-200">Import Data</div>
                                </div>
                            </button>
                        </div>
                    </div>

                    <div class="pt-4 border-t border-gray-100 dark:border-gray-800 grid grid-cols-2 gap-3">
                        <button onclick="app.resetSchedule()" id="btnReset" class="py-2 text-xs font-bold text-gray-500 hover:text-gray-700 bg-gray-100 dark:bg-gray-800 rounded-lg">Reset Default</button>
                        <button onclick="app.clearAll()" id="btnClear" class="py-2 text-xs font-bold text-red-500 hover:text-red-600 bg-red-50 dark:bg-red-900/10 rounded-lg">Clear All</button>
                    </div>
                </div>

            </div>
        </div>
    </div>    
    <script src="scheduleplanner.js"></script>
</body>
</html>
